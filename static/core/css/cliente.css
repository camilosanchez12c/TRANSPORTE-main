:root{
  --page-gap: 28px;
  --sidebar-w: 240px;
  --topbar-h: 72px;
  --primary: #25474f;
  --primary-deep: #1b2f35;
  --accent: #f39c49;
  --bg1: #f6f7f8;
  --bg2: #eef1f2;
  --white: #ffffff;
  --muted: #9aa8ad;
  --text: #264246;
  --radius: 12px;
  --card-shadow: 0 10px 30px rgba(34,50,60,0.08);

  /* Editable offsets (ajusta para mover el CTA / KPIs) */
  --kpi-move-desktop: 150px;       /* ← mueve SOLO las tarjetas KPI en desktop */
  --cta-top-desktop: -28px;         /* negativo = sube (solapa el CTA sobre el panel) */
  --cta-left-desktop: 18px;         /* espacio desde el borde izquierdo del panel */
  --kpi-gap-desktop: 20px;
  --kpis-left-mobile: 0px;
  --kpis-vertical-offset-mobile: 8px;
}


/* Prevent horizontal scroll on small layout shifts */
html,body { overflow-x: hidden; }

/* Reset / base */
*{box-sizing:border-box}
html,body{height:100%;margin:0;font-family:'Poppins', system-ui, -apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial;background:linear-gradient(180deg,var(--bg1) 0%, var(--bg2) 100%);color:var(--text);-webkit-font-smoothing:antialiased}
a{color:inherit;text-decoration:none}

/* App root */
.app-root{min-height:100vh; padding-bottom:40px;}

/* TOPBAR */
.topbar{
  position: fixed;
  left: var(--page-gap);
  right: var(--page-gap);
  top: var(--page-gap);
  height: var(--topbar-h);
  background: transparent;
  border-radius: 12px;
  z-index: 70;
  box-shadow: none;
}
.topbar-inner{ height:100%; display:flex; align-items:center; justify-content:space-between; padding: 0 18px; }

/* logo-badge */
.logo-badge{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  padding:6px;
  background: linear-gradient(180deg, rgba(37,71,79,0.06), rgba(37,71,79,0.02));
  border-radius:10px;
  box-shadow: 0 6px 12px rgba(20,30,40,0.04);
  border: 1px solid rgba(37,71,79,0.04);
}
.topbar-logo{ width:46px; height:46px; object-fit:contain; display:inline-block; border-radius:8px; }
.topbar-title{ color:var(--text); font-weight:700; margin:0 8px; font-size:20px; letter-spacing:0.2px; }

/* topbar controls */
.topbar-ingresar{ background: transparent; border: 2px solid var(--primary); color: var(--primary); padding: 6px 12px; border-radius: 8px; font-weight:700; }
.btn-ghost{ background: transparent; border: none; color: var(--text); font-size: 20px; }
.avatar{ background: rgba(37,71,79,0.08); color:var(--primary-deep); padding:8px 10px; border-radius:50%; display:flex; align-items:center; justify-content:center; font-size:18px; border:1px solid rgba(37,71,79,0.06); }

/* Sidebar (desktop) */
.sidebar{
  position: fixed;
  left: var(--page-gap);
  top: calc(var(--page-gap) + var(--topbar-h) + 12px);
  width: var(--sidebar-w);
  bottom: calc(var(--page-gap) + 80px);
  background: var(--primary);
  color: #fff;
  border-radius: 12px;
  padding: 8px 14px;
  box-shadow: var(--card-shadow);
  z-index: 50;
  display:flex;
  flex-direction:column;
  gap:8px;
}

/* nav items */
.nav .nav-item{ display:flex; align-items:center; gap:12px; color: rgba(255,255,255,0.95); padding:10px 12px; border-radius:8px; text-decoration:none; font-weight:600; transition: all 180ms ease; font-size:14px; }
.nav .nav-item i{ font-size:18px; opacity:0.95; }
.nav .nav-item:hover{ background: rgba(255,255,255,0.04); transform: translateX(3px); }
.nav .nav-item.active{ background: var(--accent); color: var(--primary-deep); box-shadow: inset 4px 0 0 rgba(255,255,255,0.06); }

/* Main area */
.main{
  margin-left: calc(var(--sidebar-w) + (var(--page-gap) * 2));
  margin-top: calc(var(--topbar-h) + (var(--page-gap) * 2) + 6px);
  padding-bottom: calc(var(--page-gap) + 140px);
  min-height: calc(100vh - (var(--topbar-h) + var(--page-gap)*3));
}

/* Page shell */
.page-shell{ max-width: 1100px; margin: 0 auto; padding: 0 12px; box-sizing:border-box; width:100%; }
.page-panel{ background: rgba(255,255,255,0.98); border-radius: 10px; padding: 26px; box-shadow: 0 8px 24px rgba(20,30,40,0.06); position: relative; overflow:visible; }

/* HERO */
.hero{ float:left; margin-right:20px; }
.hero-img{ display:block; width:240px; max-width:34vw; height:auto; border-radius:10px; box-shadow: 0 8px 22px rgba(20,30,40,0.06); object-fit:cover; }

/* CTA + KPIs - mobile-first */
.kpi-row{
  display: flex;
  flex-direction: column;
  gap: 12px;
  margin: 0;
}

/* CTA box */
.cta-wrap{
  width: 100%;
  display:flex;
  align-items:center;
  justify-content:center;
}

/* botón create */
.btn.create{
  background: linear-gradient(180deg,var(--accent), #e07d2b);
  color: var(--white);
  border:none;
  padding: 12px 20px;
  border-radius: 8px;
  font-weight:700;
  letter-spacing:0.6px;
  box-shadow: 0 8px 18px rgba(243,156,73,0.12);
}

/* KPI row (mobile): horizontal scroll cards */
.kpis-wrap{
  display:flex;
  gap:14px;
  align-items:stretch;
  flex-wrap:nowrap;
  overflow-x:auto;
  -webkit-overflow-scrolling: touch;
  padding-bottom:6px;
  width:100%;
  margin-left: var(--kpis-left-mobile);
  margin-top: var(--kpis-vertical-offset-mobile);
}
.kpis-wrap .card{
  flex: 0 0 260px;
  min-width: 220px;
}

/* KPI cards */
.card{
  padding: 18px;
  border-radius: 10px;
  background: #fff;
  box-shadow: 0 8px 18px rgba(20,30,40,0.06);
  text-align:center;
  border: 1px solid rgba(0,0,0,0.03);
  display:flex;
  flex-direction:column;
  justify-content:center;
}
.card h3{ margin:0 0 8px; font-size:15px; color:#596d70; font-weight:600; }
.kpi-number{ font-size:36px; font-weight:800; color:var(--primary-deep); margin:6px 0; }
.kpi-sub{ color:var(--muted); font-size:13px; }
.card-highlight{ border: 4px solid var(--accent); box-shadow: 0 10px 22px rgba(243,156,73,0.09); }

/* Panels & table */
.panel{ margin-top: 18px; background: #fff; border-radius:10px; padding:18px; box-shadow: 0 8px 20px rgba(20,30,40,0.06); border: 1px solid rgba(0,0,0,0.03); clear:both; }
.panel h2{ font-size:18px; font-weight:700; color:var(--primary-deep); margin-bottom:14px; }

.table-responsive{ border-radius:8px; overflow:hidden; width:100%; }
.styled-table thead th{ background:#f2f5f6; color:var(--primary-deep); font-weight:700; border-bottom:1px solid #e6eaec; font-size:13px; }
.styled-table tbody td{ vertical-align:middle; border-top:1px solid #f1f3f4; color:#556a6c; font-size:14px; word-break:break-word; }

/* dots */
.dot{ display:inline-block; width:12px; height:12px; border-radius:50%; }
.dot-orange{ background: var(--accent); }
.dot-dark{ background: var(--primary-deep); }

/* trip buttons */
.trip-panel .btn-outline-outline{ background: transparent; color: var(--accent); border: 1.5px solid var(--accent); padding: 8px 14px; border-radius:8px; font-weight:700; }
.trip-panel .btn-primary-accent{ background: var(--accent); color: #fff; border:none; padding: 8px 14px; border-radius:8px; font-weight:700; }

/* Offcanvas header logo */
.offcanvas-header .offcanvas-logo{ width:40px; height:auto; object-fit:contain; }

/* ----------------- DESKTOP LAYOUT (>=992px) ----------------- */
@media (min-width: 992px) {
  .main{
    margin-left: calc(var(--sidebar-w) + (var(--page-gap) * 2));
    margin-top: calc(var(--topbar-h) + (var(--page-gap) * 2) + 6px);
  }

  /* Layout de fila para KPI + CTA */
  .kpi-row{
    flex-direction: row;
    align-items: flex-start;
    gap: var(--kpi-gap-desktop);
    margin: 0;
    /* quitamos transform en el contenedor para no mover el CTA */
    transform: none;
  }

  /* Hacemos el panel relativo para permitir absolute positioning del CTA */
  .page-panel { position: relative; }

  /* CTA absolute para solaparlo sobre el borde izquierdo del panel */
  .kpi-row > .col-12.col-lg-3,
  .kpi-row .cta-wrap {
    flex: 0 0 auto;
    width: 200px;
  }

  .kpi-row .cta-wrap {
    position: absolute;
    left: var(--cta-left-desktop);
    top: var(--cta-top-desktop);
    z-index: 40;
    justify-content: flex-start;
    padding: 0;
  }

  .kpi-row .cta-wrap .btn.create { width: 200px; padding: 12px 18px; border-radius: 10px; }

  /* Reservar espacio a la derecha para los KPIs (evita overlap visual) */
  .kpi-row > .col-12.col-lg-9 { margin-left: 200px; }

  /* KPIs en fila: aplicamos desplazamiento SOLO a la columna de KPIs */
  .kpi-row > .col-12.col-lg-9 {
    transform: translateX(var(--kpi-move-desktop));
    transition: transform .35s cubic-bezier(.2,.9,.2,1);
  }

  .kpis-wrap{
    display:flex;
    flex-wrap:nowrap;
    gap:var(--kpi-gap-desktop);
    overflow:visible;
    padding-bottom:0;
    justify-content:flex-start;
  }

  .kpis-wrap .card{ flex: 0 0 220px; min-width:220px; padding:22px; }
  .kpi-number{ font-size:40px; }
}

/* ----------------- TABLET (>=768px and <992px) ----------------- */
@media (min-width: 768px) and (max-width: 991.98px) {
  .main{ margin-left: calc(var(--sidebar-w) + (var(--page-gap) * 2)); margin-top: calc(var(--topbar-h) + (var(--page-gap) * 2) + 6px); }
  .kpi-row{ flex-direction: row; align-items:center; gap:16px; }
  .cta-wrap{ width:180px; justify-content:flex-start; position: static; }
  .kpis-wrap{ gap:16px; overflow-x:auto; }
  .kpis-wrap .card{ flex: 0 0 240px; min-width:200px; padding:20px; }
  .kpi-number{ font-size:36px; }
  .kpi-row > .col-12.col-lg-9 { margin-left: 0; }
}

/* ----------------- SMALL DEVICES (<=767.98px) ----------------- */
@media (max-width: 767.98px) {
  .main{ margin-left: 0; margin-top: calc(var(--topbar-h) + 20px); padding: 12px; }

  .kpi-row{
    margin-top: 20px;
    gap: 12px;
    align-items: center;
    display: flex;
    flex-direction: column;
    justify-content: flex-start;
  }

  .cta-wrap {
    margin-left: 0;
    margin-top: 0;
    justify-content: center;
    width:100%;
    position: static;
  }

  .kpis-wrap {
    display: flex;
    flex-direction: row;
    justify-content: flex-start;
    align-items: flex-start;
    gap: 14px;
    flex-wrap: nowrap;
    width: 100%;
    margin-left: var(--kpis-left-mobile);
    margin-top: var(--kpis-vertical-offset-mobile);
    padding-bottom: 6px;
    transform: none;
  }

  .kpis-wrap .card{ flex: 0 0 220px; min-width:180px; padding:16px; }
  .kpi-number{ font-size:32px; }

  .topbar{ left: 12px; right: 12px; top: 12px; border-radius: 10px; }
  .topbar-title{ font-size:16px; }
  .topbar-logo{ width:40px; height:40px; }
}

/* Very small screens */
@media (max-width: 575.98px){
  .topbar-right .topbar-ingresar{ display:none; }
  .topbar{ height:64px; }
  .main{ margin-top: calc(var(--topbar-h) + 16px); }
  .kpi-number{ font-size:28px; }
  .kpis-wrap .card{ min-width:160px; padding:12px; }
}

/* Offcanvas sizing + styling for mobile (blue menu) */
.offcanvas.offcanvas-start {
  width: 320px;
  max-width: 85vw;
  background: var(--primary);
  color: #fff;
}
.offcanvas .offcanvas-header { border-bottom: 1px solid rgba(255,255,255,0.06); }
.offcanvas .nav .nav-item { color: #fff; padding: 1px 8px; border-radius: 8px; }
.offcanvas .nav .nav-item:hover { background: rgba(255,255,255,0.04); color: #fff; }
.offcanvas .btn-close { filter: invert(1) brightness(2); }

/* utility to hide the old compact sidebar if any leftover */
.sidebar-compact { display: none !important; }

/* Backdrop para el fallback del offcanvas */
.custom-offcanvas-backdrop{
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.45);
  z-index: 1040;
  -webkit-backdrop-filter: blur(1px);
  backdrop-filter: blur(1px);
}
.offcanvas.show { z-index: 1045; }

/* General safeguard */
.page-shell, .page-panel, .main { box-sizing: border-box; }

/* ------------------ Ajuste: CTA centrado y KPIs alineados ------------------ */

/* Variables de control (ajusta si quieres más/menos separación) */
:root {
  --cta-top-desktop-centered: -34px;   /* qué tanto sube el CTA sobre el panel (negativo = sube) */
  --cta-max-width: 760px;             /* ancho máximo visual del CTA */
  --cta-side-gap: 48px;               /* espacio lateral dentro del panel para el CTA */
}

/* Desktop: centro y composición simétrica */
@media (min-width: 992px) {

  /* Hacemos page-panel relativo (por si se usa en otro lugar) */
  .page-panel { position: relative; }

  /* Mantener la fila pero quitar transform que afecte todo el conjunto */
  .kpi-row {
    display:flex;
    flex-direction:row;
    align-items:flex-start;
    gap: var(--kpi-gap-desktop, 20px);
    margin: 0;
    transform: none !important;
  }

  /* CTA: posicionamiento ABSOLUTO pero centrado horizontalmente */
  .kpi-row > .col-12.col-lg-3,
  .kpi-row .cta-wrap {
    flex: 0 0 auto;
    width: auto;
  }

  .kpi-row .cta-wrap {
    position: absolute;
    left: 50%;
    top: var(--cta-top-desktop-centered);
    transform: translateX(-50%);         /* centra el elemento exactamente */
    z-index: 60;
    padding: 0;
    display:flex;
    justify-content:center;
    width: calc(100% - (var(--cta-side-gap) * 2)); /* respeta gaps laterales del panel */
    max-width: var(--cta-max-width);
  }

  .kpi-row .cta-wrap .btn.create {
    width: 100%;
    padding: 12px 22px;
    border-radius: 10px;
    box-shadow: 0 10px 22px rgba(243,156,73,0.12);
    font-size: 14px;
    letter-spacing: 1px;
  }

  /* KPIs centradas debajo del CTA: quitamos margin-left y centramos la columna */
  .kpi-row > .col-12.col-lg-9 { 
    margin-left: 0 !important;
    width: 100%;
    display: block;
  }

  .kpis-wrap {
    display:flex;
    justify-content:center;   /* CENTRADO HORIZONTAL de las tarjetas */
    gap: var(--kpi-gap-desktop, 20px);
    overflow: visible;
    padding-bottom: 0;
  }

  /* Ajuste ancho tarjetas para visual armónico */
  .kpis-wrap .card { flex: 0 0 220px; min-width: 220px; padding: 20px; }
  .kpi-number { font-size: 40px; }
}

/* Tablet: devolver CTA a flujo (no absolute) */
@media (min-width: 768px) and (max-width: 991.98px) {
  .kpi-row .cta-wrap { position: static; width: 180px; justify-content:flex-start; margin: 0 auto 6px auto; }
  .kpis-wrap { justify-content:flex-start; overflow-x:auto; }
  .kpi-row > .col-12.col-lg-9 { margin-left: 0; }
}

/* Mobile: sin cambios (se mantiene scroll horizontal para kpis) */
@media (max-width: 767.98px) {
  .kpi-row { margin-top: 20px; }
  .kpi-row .cta-wrap { position: static; width: 100%; margin-bottom: 6px; }
  .kpis-wrap { justify-content:flex-start; overflow-x:auto; }
}
